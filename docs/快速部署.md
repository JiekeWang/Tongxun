# 快速部署到真机

## 方法一：使用快速部署脚本（推荐）

### 基本用法
```powershell
.\quick-deploy.ps1
```

这个脚本会：
1. ✅ 自动检测连接的设备（USB 或无线调试）
2. ✅ 自动构建 Debug APK
3. ✅ 自动安装到设备
4. ✅ 显示详细的进度信息

### 高级用法

**跳过构建，只安装已存在的 APK：**
```powershell
.\quick-deploy.ps1 -NoBuild
```

**安装后自动启动应用：**
```powershell
.\quick-deploy.ps1 -Launch
```

**指定设备 ID（适用于多个设备连接时）：**
```powershell
.\quick-deploy.ps1 -DeviceId "192.168.4.28:37157"
```

**组合使用：**
```powershell
.\quick-deploy.ps1 -NoBuild -Launch -DeviceId "192.168.4.28:37157"
```

## 方法二：使用 Gradle 命令（最快）

如果你已经配置好设备，可以直接使用 Gradle 命令：

```powershell
.\gradlew.bat installDebug
```

这个命令会：
- 自动构建 Debug APK
- 自动安装到已连接的设备
- 如果只有一个设备，会自动选择

## 方法三：Android Studio（最简单）

1. 在 Android Studio 中点击运行按钮（绿色三角形）
2. 或使用快捷键：`Shift + F10`（Windows）或 `Ctrl + R`（Mac）

## 无线调试设置

如果使用无线调试，需要先连接：

```powershell
# 查找 ADB 路径（通常在）
$adb = "C:\Users\你的用户名\AppData\Local\Android\Sdk\platform-tools\adb.exe"

# 配对设备（首次使用）
& $adb pair 192.168.4.28:37157
# 输入配对码

# 连接设备
& $adb connect 192.168.4.28:37157

# 验证连接
& $adb devices
```

## 常见问题

### 1. 找不到 ADB
- 确保已安装 Android SDK
- 设置 `ANDROID_HOME` 环境变量
- 或确保 ADB 在标准路径：`%LOCALAPPDATA%\Android\Sdk\platform-tools\`

### 2. 设备未检测到
- 检查 USB 连接或无线调试连接
- 确保已开启 USB 调试
- 在手机上授权此电脑调试

### 3. 安装失败
- 检查设备存储空间
- 尝试卸载旧版本：`adb uninstall com.tongxun`
- 检查 APK 签名是否匹配

### 4. 构建很慢
- 首次构建需要下载依赖，较慢是正常的
- 后续构建会使用缓存，会快很多
- 可以使用 `-NoBuild` 跳过构建，只安装

## 性能优化建议

1. **使用无线调试**：避免频繁插拔 USB
2. **保持设备连接**：避免每次都要重新授权
3. **使用增量构建**：只构建变更的部分（Gradle 自动处理）
4. **使用 `-NoBuild`**：如果只是测试 UI 改动，可以跳过构建

