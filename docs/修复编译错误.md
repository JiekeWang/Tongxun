# 修复编译错误指南

## 已修复的问题

1. ✅ `socket.connected()` → `socket.isConnected`（属性，不是方法）
2. ✅ `reconnectionDelay` 类型修正

## 如果还有错误，请按以下步骤操作

### 步骤 1：同步 Gradle 依赖

**在 Android Studio 中：**
1. 点击顶部黄色提示条的 **"Sync Now"**
2. 或菜单：`File` → `Sync Project with Gradle Files`
3. 等待同步完成（首次可能需要几分钟）

**命令行方式：**
```powershell
cd E:\Tongxun
.\gradlew.bat build --refresh-dependencies
```

### 步骤 2：检查错误信息

如果同步后仍有错误，请查看：

1. **Build 输出窗口**（底部）
   - 查看具体的错误信息
   - 通常错误会显示在红色文字中

2. **Problems 面板**
   - 点击底部 "Problems" 标签
   - 查看所有错误和警告

3. **代码编辑器**
   - 红色波浪线表示错误
   - 黄色波浪线表示警告

### 步骤 3：常见错误及解决方法

#### 错误 1：无法解析符号 'Socket' 或 'IO'
**原因**：Socket.IO 库未同步
**解决**：
1. 确认 `app/build.gradle` 中有：
   ```gradle
   implementation ('io.socket:socket.io-client:2.1.0') {
       exclude group: 'org.json', module: 'json'
   }
   ```
2. 同步 Gradle 依赖（步骤 1）
3. 如果还是不行，清理并重新构建：
   ```powershell
   .\gradlew.bat clean
   .\gradlew.bat build
   ```

#### 错误 2：'connected()' 方法不存在
**原因**：API 使用错误
**解决**：已修复，使用 `isConnected` 属性

#### 错误 3：类型不匹配
**原因**：参数类型错误
**解决**：已修复，`reconnectionDelay` 使用 Int 类型

#### 错误 4：无法找到 'IO.Options'
**原因**：Socket.IO 库版本问题或未同步
**解决**：
1. 确认依赖已添加
2. 同步 Gradle
3. 如果问题持续，尝试更新版本：
   ```gradle
   implementation 'io.socket:socket.io-client:2.1.0'
   ```

### 步骤 4：清理并重新构建

如果同步后仍有问题：

```powershell
# 清理构建
.\gradlew.bat clean

# 重新构建
.\gradlew.bat build

# 或者只编译 app 模块
.\gradlew.bat :app:build
```

### 步骤 5：检查项目结构

确认项目结构正确：
```
Tongxun/
├── app/
│   ├── build.gradle  ← 确认 Socket.IO 依赖在这里
│   └── src/
│       └── main/
│           └── java/
│               └── com/tongxun/
│                   └── data/
│                       └── remote/
│                           └── WebSocketManager.kt  ← 确认文件存在
└── build.gradle
```

## 验证修复

修复后，应该：
1. ✅ 没有红色错误提示
2. ✅ 代码可以正常编译
3. ✅ 可以运行应用

## 如果问题仍然存在

请提供：
1. **具体的错误信息**（从 Build 输出窗口复制）
2. **错误所在的行号**
3. **Android Studio 版本**
4. **Gradle 版本**

这样我可以更准确地帮你解决问题。

