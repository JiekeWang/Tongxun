# 添加 Gradle 目录到杀毒软件白名单

## 问题说明
Gradle 构建时频繁出现 "Could not move temporary workspace" 错误，通常是因为杀毒软件实时扫描锁定了 Gradle 缓存文件。

## 解决方案
将 `C:\Users\user\.gradle` 目录添加到杀毒软件的白名单/信任区。

---

## 腾讯电脑管家

### 方法一：通过设置中心
1. 打开腾讯电脑管家
2. 点击右上角 **设置** 图标（齿轮⚙️）
3. 进入 **设置中心**
4. 左侧选择 **实时防护** 或 **病毒查杀**
5. 找到 **信任区** 或 **白名单** 选项
6. 点击 **添加文件/文件夹**
7. 浏览选择：`C:\Users\user\.gradle`
8. 确认添加

### 方法二：通过病毒查杀
1. 打开腾讯电脑管家
2. 点击 **病毒查杀**
3. 点击右上角 **设置** 或 **信任区**
4. 选择 **添加信任文件/文件夹**
5. 浏览选择：`C:\Users\user\.gradle`
6. 确认添加

---

## Windows Defender（Windows 安全中心）

1. 打开 **设置** → **更新和安全** → **Windows 安全中心**
2. 点击 **病毒和威胁防护**
3. 点击 **管理设置**（在"病毒和威胁防护设置"下）
4. 向下滚动找到 **排除项**
5. 点击 **添加或删除排除项**
6. 点击 **添加排除项** → **文件夹**
7. 浏览选择：`C:\Users\user\.gradle`
8. 确认添加

---

## 其他常见杀毒软件

### 360 安全卫士
1. 打开 360 安全卫士
2. 点击 **设置**
3. 选择 **信任与阻止**
4. 点击 **信任区**
5. 添加文件夹：`C:\Users\user\.gradle`

### 火绒安全
1. 打开火绒安全
2. 点击 **防护中心**
3. 点击 **信任区**
4. 添加文件夹：`C:\Users\user\.gradle`

### 卡巴斯基
1. 打开卡巴斯基
2. 设置 → **附加** → **威胁和排除项**
3. 点击 **管理排除项**
4. 添加文件夹：`C:\Users\user\.gradle`

---

## 验证是否生效

添加白名单后：
1. 重启 Android Studio（如果正在运行）
2. 重新尝试构建项目
3. 如果不再出现 "Could not move temporary workspace" 错误，说明设置成功

---

## 注意事项

- ✅ 添加整个 `.gradle` 文件夹，而不是单个文件
- ✅ 添加后建议重启 Android Studio
- ✅ 如果问题仍然存在，可能需要重启电脑使设置生效
- ⚠️ 确保只添加 `C:\Users\user\.gradle` 目录，不要添加其他系统目录

---

## 如果问题仍然存在

如果添加白名单后问题仍然存在，可以尝试：

1. **清理整个 transforms 目录**：
   ```powershell
   Remove-Item -Path 'C:\Users\user\.gradle\caches\8.13\transforms' -Recurse -Force
   ```

2. **清理整个 Gradle 缓存**（会重新下载依赖）：
   ```powershell
   Remove-Item -Path 'C:\Users\user\.gradle\caches' -Recurse -Force
   ```

3. **使用清理脚本**：
   - 双击运行 `clean-gradle-cache.bat`

